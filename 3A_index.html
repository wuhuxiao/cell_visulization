<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CodePen - Personal Webpage</title>
    <title>BRADENGELHARDT</title>
    <meta name="description" content="Web designer and front-end developer">
    <link href='https://fonts.googleapis.com/css?family=Raleway:100,200,400,600' rel='stylesheet' type='text/css'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.4/jquery.fullPage.min.css" rel="stylesheet"
        type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'>
    <link rel="stylesheet" href="./style.css">

</head>

<body>
    <!-- partial:index.partial.html -->

    <body>
        <!-- navbar header -->

        <!-- end navbar header -->

        <!-- sidebar slider -->

        <!-- end navbar slider -->

        <!-- begin fullpage -->

        <div id="fullpage">

            <!-- begin section -->

            <div class="section aboutme" data-anchor="aboutme">
                <div id="A_data_list" class="opaque-bg animated fadeInDown" style="color: white; font-family: auto;">
                </div>
            </div>
            <!-- end section -->



        </div>
        <!-- end fullpage -->
    </body>
    <!-- partial -->
    <script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.4/jquery.fullPage.min.js'></script>
    <!-- <script src="./script.js"></script> -->
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <script type="text/javascript">
        // 初始化图表标签
        A_data = [
            [1.68781089, 1.7248446, 1.74819215, 1.75494609, 2.31817857,
                2.19482222, 2.47809298, 2.19734557, 3.50831794, 2.42888421,
                1.7153011, 0., 0., 0., 0.,
                0., 0., 0., 0., 0.,
                0., 0., 0., 0., 0.,
                0., 0., 0., 0., 0.],
            [1.76289002, 1.2903712, 2.2269419, 1.68764438, 1.07193788,
                2.07005523, 2.16548282, 1.60914243, 3.03100102, 1.26729305,
                1.5311593, 2.94873269, 1.31379605, 1.55586966, 2.66741783,
                1.75772789, 2.25632971, 3.40622741, 3.81603707, 1.62380033,
                1.91663418, 2.02283365, 5.52740251, 0., 0.,
                0., 0., 0., 0., 0.],
            [2.76083978, 0.95598886, 2.64992866, 1.74528693, 1.18445896,
                3.03203406, 1.82329827, 1.02705902, 2.21838671, 1.29968538,
                1.57922827, 2.79261525, 0.96246505, 2.17997876, 2.54464982,
                1.59999342, 2.10304392, 2.0496293, 1.8581485, 1.59531142,
                1.37254215, 2.02422887, 3.90965595, 1.40558741, 2.07692155,
                3.40253393, 2.74996416, 1.69465314, 4.85181577, 0.],
            [2.76284268, 1.06792311, 2.43867302, 1.38549815, 1.24693958,
                2.77129466, 1.99747976, 1.06027744, 1.26642029, 1.15088987,
                1.26927049, 1.65743495, 1.3802126, 1.8682591, 2.77382883,
                1.30483347, 1.77229048, 2.08571408, 1.64339763, 1.36336161,
                1.06769729, 1.73287364, 2.60509025, 1.73954123, 2.326847,
                2.93239625, 2.6187897, 2.05942067, 3.75643386, 2.91047637],
            [2.52981136, 1.21527082, 2.19843069, 1.56400776, 0.85385248,
                2.42950201, 1.31623791, 1.12100933, 1.36799302, 1.46884004,
                1.3733175, 2.06103434, 1.45892954, 1.36252899, 1.91305454,
                1.34686122, 1.85468838, 1.92907542, 1.77317132, 2.27788612,
                1.46671369, 1.93568825, 2.89842235, 1.92438023, 1.807479,
                2.24349478, 3.21081482, 2.07685307, 2.11307982, 2.79717745],
            [2.4398501, 2.08658432, 1.69646126, 1.98662811, 1.23330219,
                2.71437547, 1.98634998, 2.18098278, 1.36756207, 1.03445387,
                1.06819064, 2.42002334, 2.0286943, 2.88282079, 2.26034633,
                1.85039445, 2.25094006, 1.45438144, 2.13711693, 2.89293707,
                2.10273235, 2.98401506, 3.44718385, 2.07329043, 2.18319051,
                1.98019402, 3.72873729, 2.67242919, 0., 2.36499062],
            [2.04739133, 2.53375888, 2.55980469, 2.50576659, 1.70841549,
                1.99332508, 2.70843325, 2.33447147, 1.82771634, 1.88249459,
                1.536221, 2.57669177, 0., 0., 0.,
                0., 0., 0., 0., 0.,
                0., 0., 0., 0., 0.,
                0., 0., 0., 0., 0.]]

        /**
    * forEach+map循环
    * forEach和map的第一个参数是当前元素，第二个是数组下标
    * .join('')的作用是去掉map循环后返回多余的逗号
        */
        var A_Str = ''
        A_data.forEach((e, index) => {
            let layer = String(index + 1).padStart(2, 0)
            A_Str += `<div style="display: flex;    margin: 10px;">
                        <label style="width: 90px;">第${layer}层</label>
                        <img id="A_image_${layer}" src="./3A_clip/T00_Z0${layer}.bmp" alt="" width="400" height="400">
                        <div style="display: flex;flex-direction: column;">
                        <label id="A_label_${layer}" style="width: 90px;">第0帧</label>
                        <label id="A_value_${layer}" style="width: 90px;">抖动值</label>
                        <button id="A_btn_${layer}" style="color: black;">暂停</button>
                        <button id="A_btn_start_${layer}" style="color: black;">开始</button>
                        </div>
                        <div id="A_chart_${layer}" style="width:800px;height:400px;"></div>
                    </div>`
        })
        document.getElementById("A_data_list").innerHTML = A_Str;
        window.onload = function()  {
            var interval_list = []

            A_data.forEach((e, index) => {
                let layer = String(index + 1).padStart(2, 0)
                let A_Chart = echarts.init(document.getElementById("A_chart_"+layer));
                let A_image = document.getElementById("A_image_"+layer)
                let A_time
                let A_interval
                let A_label = document.getElementById("A_label_"+layer)
                let A_btn = document.getElementById("A_btn_"+layer)
                let A_value = document.getElementById("A_value_"+layer)
                let A_btn_start = document.getElementById("A_btn_start_"+layer)
                let x_data = []
                let y_data = []
                let cur_params
                for (let i = 0; i < e.length; i++) {
                    if (e[i] != 0) {
                        x_data.push(String(i))
                        y_data.push(e[i])
                    }
                }
                let A_options = {
                    //定义一个标题
                    title: {
                        text: '图像变化'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    //X轴设置
                    xAxis: {
                        type: 'category',
                        data: x_data
                    },
                    yAxis: {
                        type: 'value'
                    },
                    //name=legend.data的时候才能显示图例
                    series: [{
                        name: '抖动值',
                        type: 'line',
                        data: y_data
                    }]

                };
                A_Chart.setOption(A_options);
                A_btn.addEventListener('click',e=>{
                    clearInterval(interval_list[index]);
                })
                A_btn_start.addEventListener('click',e=>{
                    clearInterval(interval_list[index]);

                    A_time = cur_params.name
                    let current = A_time.padStart(2, 0)
                    let next = String(eval(A_time) + 1).padStart(2, 0)
                    A_value.innerHTML = `抖动值：${cur_params.data}`
                    let A_change = true
                    interval_list[index]= setInterval(function () {
                        if (A_change) {
                            A_image.src = `./3A_clip/T${current}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${current}帧`
                        } else {
                            A_image.src =  `./3A_clip/T${next}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${next}帧`
                        }
                        A_change = !A_change
                    }, 1000) ;
                })
                A_Chart.on('click', (params) => {
                    console.log('Aparams', params);
                    cur_params = params
                    clearInterval(interval_list[index]);
                    
                    A_time = params.name
                    let current = A_time.padStart(2, 0)
                    let next = String(eval(A_time) + 1).padStart(2, 0)
                    A_value.innerHTML = `抖动值：${params.data}`
                    let A_change = true
                    interval_list[index]= setInterval(function () {
                        if (A_change) {
                            A_image.src = `./3A_clip/T${current}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${current}帧`
                        } else {
                            A_image.src =  `./3A_clip/T${next}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${next}帧`
                        }
                        A_change = !A_change
                    }, 1000) ;
                })
            })

        }


    </script>
</body>

</html>