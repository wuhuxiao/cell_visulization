<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CodePen - Personal Webpage</title>
    <title>BRADENGELHARDT</title>
    <meta name="description" content="Web designer and front-end developer">
    <link href='https://fonts.googleapis.com/css?family=Raleway:100,200,400,600' rel='stylesheet' type='text/css'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.4/jquery.fullPage.min.css" rel="stylesheet"
        type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'>
    <link rel="stylesheet" href="./style.css">

</head>

<body>
    <!-- partial:index.partial.html -->

    <body>
        <!-- navbar header -->

        <!-- end navbar header -->

        <!-- sidebar slider -->

        <!-- end navbar slider -->

        <!-- begin fullpage -->

        <div id="fullpage">

            <!-- begin section -->

            <div class="section aboutme" data-anchor="aboutme">
                <div id="A_data_list" class="opaque-bg animated fadeInDown" style="color: white; font-family: auto;">
                </div>
            </div>
            <!-- end section -->



        </div>
        <!-- end fullpage -->
    </body>
    <!-- partial -->
    <script src='https://code.jquery.com/jquery-2.1.1.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.4/jquery.fullPage.min.js'></script>
    <!-- <script src="./script.js"></script> -->
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <script type="text/javascript">
        // 初始化图表标签
        A_data = [
       [2.55997965, 3.68859051, 1.87068434, 2.35995865, 2.06090447,
        1.44719165, 1.31557294, 2.91471364, 2.55605889, 2.5235914 ,
        1.79809832, 2.13877401, 2.14809944, 2.294991  , 1.53317591,
        4.90769498, 0.        , 0.        , 0.        , 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ],
       [1.22166934, 2.12436417, 1.77788383, 2.18841085, 1.99489073,
        1.50462997, 1.57145967, 1.50043826, 1.54589706, 1.86408192,
        1.97323978, 1.40885886, 1.60432617, 1.96023009, 1.42838196,
        1.73531062, 2.20556976, 1.66255706, 2.57239112, 1.72728289,
        2.21134718, 2.02050916, 2.37914987, 2.11695314, 2.03111613,
        1.99338008, 2.01373442, 0.        , 0.        , 0.        ],
       [1.52781076, 1.56870587, 1.90887975, 1.60944589, 1.59404032,
        1.35950207, 1.93467258, 1.48855215, 1.61222591, 2.40688157,
        2.54023701, 1.78423023, 1.73259926, 2.34507317, 1.93057288,
        1.63549116, 1.98886437, 2.34019161, 2.41047785, 2.19855204,
        2.43562656, 1.94153056, 2.32074066, 2.89577082, 2.55479846,
        2.32418973, 0.        , 0.        , 0.        , 0.        ],
       [1.53665112, 1.69819429, 2.20745398, 1.56292859, 1.62109413,
        1.6340984 , 2.64242996, 1.75178492, 1.89771089, 2.7340116 ,
        1.60295414, 1.49619223, 1.64626478, 2.11121946, 1.61828091,
        2.07161422, 2.43721278, 2.01096277, 1.82238083, 1.80794767,
        2.121236  , 2.6291468 , 2.30821457, 2.58815478, 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ],
       [1.19007555, 1.86558091, 2.39932189, 1.68024373, 1.88651731,
        2.23039044, 2.06076627, 1.89282381, 2.05231589, 2.81617617,
        1.55799932, 2.1484522 , 2.3454844 , 2.45253334, 2.91699326,
        2.13637417, 3.11492409, 2.18128057, 2.9183722 , 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ,
        0.        , 0.        , 0.        , 0.        , 0.        ],
       ]

        /**
    * forEach+map循环
    * forEach和map的第一个参数是当前元素，第二个是数组下标
    * .join('')的作用是去掉map循环后返回多余的逗号
        */
        var A_Str = ''
        A_data.forEach((e, index) => {
            let layer = ''
            layer = String(index + 1).padStart(2, 0)
            A_Str += `<div style="display: flex;    margin: 10px;">
                        <label style="width: 90px;">第${layer}层</label>
                        <img id="A_image_${layer}" src="./gfp_clip/T00_Z0${layer}.bmp" alt="" width="400" height="400">
                        <div style="display: flex;flex-direction: column;">
                        <label id="A_label_${layer}" style="width: 90px;">第0帧</label>
                        <label id="A_value_${layer}" style="width: 90px;">抖动值</label>
                        <button id="A_btn_${layer}" style="color: black;">暂停</button>
                        <button id="A_btn_start_${layer}" style="color: black;">开始</button>
                        </div>
                        <div id="A_chart_${layer}" style="width:800px;height:400px;"></div>
                    </div>`
        })
        document.getElementById("A_data_list").innerHTML = A_Str;
        window.onload = function()  {
            var interval_list = []

            A_data.forEach((e, index) => {
                let layer = ''
                layer = String(index + 1).padStart(2, 0)
                let A_Chart = echarts.init(document.getElementById("A_chart_"+layer));
                let A_image = document.getElementById("A_image_"+layer)
                let A_time
                let A_interval
                let A_label = document.getElementById("A_label_"+layer)
                let A_btn = document.getElementById("A_btn_"+layer)
                let A_value = document.getElementById("A_value_"+layer)
                let A_btn_start = document.getElementById("A_btn_start_"+layer)
                let x_data = []
                let y_data = []
                let cur_params
                for (let i = 0; i < e.length; i++) {
                    if (e[i] != 0) {
                        x_data.push(String(i))
                        y_data.push(e[i])
                    }
                }
                let A_options = {
                    //定义一个标题
                    title: {
                        text: '图像变化'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    //X轴设置
                    xAxis: {
                        type: 'category',
                        data: x_data
                    },
                    yAxis: {
                        type: 'value'
                    },
                    //name=legend.data的时候才能显示图例
                    series: [{
                        name: '抖动值',
                        type: 'line',
                        data: y_data
                    }]

                };
                A_Chart.setOption(A_options);
                A_btn.addEventListener('click',e=>{
                    clearInterval(interval_list[index]);
                })
                A_btn_start.addEventListener('click',e=>{
                    clearInterval(interval_list[index]);

                    A_time = cur_params.name
                    let current = A_time.padStart(2, 0)
                    let next = String(eval(A_time) + 1).padStart(2, 0)
                    A_value.innerHTML = `抖动值：${cur_params.data}`
                    let A_change = true
                    interval_list[index]= setInterval(function () {
                        if (A_change) {
                            A_image.src = `./gfp_clip/T${current}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${current}帧`
                        } else {
                            A_image.src =  `./gfp_clip/T${next}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${next}帧`
                        }
                        A_change = !A_change
                    }, 1000) ;
                })
                A_Chart.on('click', (params) => {
                    console.log('Aparams', params);
                    cur_params = params
                    clearInterval(interval_list[index]);
                    
                    A_time = params.name
                    let current = A_time.padStart(2, 0)
                    let next = String(eval(A_time) + 1).padStart(2, 0)
                    A_value.innerHTML = `抖动值：${params.data}`
                    let A_change = true
                    interval_list[index]= setInterval(function () {
                        if (A_change) {
                            A_image.src = `./gfp_clip/T${current}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${current}帧`
                        } else {
                            A_image.src =  `./gfp_clip/T${next}_Z0${layer}.bmp`
                            A_label.innerHTML = `第${next}帧`
                        }
                        A_change = !A_change
                    }, 1000) ;
                })
            })

        }


    </script>
</body>

</html>